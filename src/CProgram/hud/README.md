# HUD ä»¿çœŸè¾“å…¥/è¾“å‡ºå‚æ•°è§„èŒƒï¼ˆä¸ `hud_sim.c` ä¸€è‡´ï¼‰

æœ¬æ–‡ä»¶æè¿° `hud_sim.c` ä¸­å®é™…ä½¿ç”¨çš„è¾“å…¥ä¸è¾“å‡ºæ•°æ®ç»“æ„åŠå­—æ®µï¼Œä¾¿äºåè®®ç¼–åˆ¶ä¸è”è°ƒã€‚

---

## ä¸€ã€ç±»å‹çº¦å®š

- `real_t` = `double`ï¼ˆ8 å­—èŠ‚ï¼‰
- `u8/u16/u32/u64` = 1/2/4/8 å­—èŠ‚æ— ç¬¦å·æ•´æ•°
- `int` = 4 å­—èŠ‚æœ‰ç¬¦å·æ•´æ•°ï¼ˆå¹³å°çº¦å®šï¼‰
- å­—ç¬¦ä¸²æ•°ç»„æŒ‰å›ºå®šé•¿åº¦åˆ†é…ï¼Œä¾‹å¦‚ `char[32]`
- `Timestamp` ç»“æ„ï¼š`sec(u64)` + `usec(u32)`ï¼Œçº¦ 12 å­—èŠ‚

---

## äºŒã€è¾“å…¥å‚æ•°ï¼ˆInputsï¼‰

### 1) æƒ¯å¯¼ `INS_Data`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| latitude_deg | çº¬åº¦(åº¦) | double | 8 |
| longitude_deg | ç»åº¦(åº¦) | double | 8 |
| altitude_m | æµ·æ‹”é«˜åº¦(ç±³) | double | 8 |
| roll_deg | æ»šè½¬è§’(åº¦) | double | 8 |
| pitch_deg | ä¿¯ä»°è§’(åº¦) | double | 8 |
| yaw_deg | èˆªå‘è§’(åº¦) | double | 8 |
| vel_n_mps | åŒ—å‘é€Ÿåº¦(m/s) | double | 8 |
| vel_e_mps | ä¸œå‘é€Ÿåº¦(m/s) | double | 8 |
| vel_d_mps | ä¸‹å‘é€Ÿåº¦(m/s) | double | 8 |
| status | æœ‰æ•ˆæ€§(0/1) | int | 4 |

ğŸ“Œ å°ç»“ï¼šçº¦ 88 å­—èŠ‚

### 2) æ— çº¿ç”µ `Radio_Data`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| com1_lock | COM1 é”å®š | int | 4 |
| nav1_lock | NAV1 é”å®š | int | 4 |
| radio_alt_m | æ— çº¿ç”µé«˜åº¦(ç±³) | double | 8 |
| active_freq_str | å½“å‰é¢‘ç‡å­—ç¬¦ä¸² | char[32] | 32 |

ğŸ“Œ å°ç»“ï¼šçº¦ 60 å­—èŠ‚

### 3) å¤§æ°” `Atmosphere_Data`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| pressure_hpa | æ°”å‹(hPa) | double | 8 |
| temperature_c | æ¸©åº¦(â„ƒ) | double | 8 |
| wind_speed_mps | é£é€Ÿ(m/s) | double | 8 |
| wind_dir_deg | é£å‘(åº¦) | double | 8 |
| density_kg_m3 | ç©ºæ°”å¯†åº¦(kg/mÂ³) | double | 8 |

ğŸ“Œ å°ç»“ï¼šçº¦ 52 å­—èŠ‚

### 4) è½½æœºçŠ¶æ€ `Aircraft_State`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| airspeed_mps | çœŸç©ºé€Ÿ(m/s) | double | 8 |
| mach | é©¬èµ«æ•° | double | 8 |
| g_load | è¿‡è½½(g) | double | 8 |
| fuel_percent | ç‡ƒæ²¹(%) | double | 8 |
| on_ground | æ˜¯å¦åœ¨åœ°é¢ | int | 4 |
| parking_brake | åœè½¦åˆ¹è½¦ | int | 4 |

ğŸ“Œ å°ç»“ï¼šçº¦ 52 å­—èŠ‚

### 5) ç›®æ ‡ `Sensor_Target`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| target_id | ç›®æ ‡ ID | u32 | 4 |
| sensor | ä¼ æ„Ÿå™¨ç±»å‹(0=RADAR,1=DAS,2=IR) | enum(int) | 4 |
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| range_m | è·ç¦»(ç±³) | double | 8 |
| azimuth_deg | ç›¸å¯¹æ–¹ä½(åº¦ï¼Œå³ä¸ºæ­£) | double | 8 |
| elevation_deg | ç›¸å¯¹ä¿¯ä»°(åº¦ï¼Œä¸Šä¸ºæ­£) | double | 8 |
| rcs_dbsm | RCS(dBsm) | double | 8 |
| track_covariance[3] | è·Ÿè¸ªåæ–¹å·® | double[3] | 24 |
| track_status | è·Ÿè¸ªçŠ¶æ€(0/1/2) | int | 4 |

ğŸ“Œ å•ç›®æ ‡ï¼šçº¦ 88 å­—èŠ‚

### 6) ç›®æ ‡åˆ—è¡¨ `Sensor_Target_List`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| target_count | ç›®æ ‡æ•°é‡ | u16 | 2 |
| targets | ç›®æ ‡æ•°ç»„ï¼Œæœ€å¤§ 128 | `Sensor_Target[MAX_TARGETS]` | çº¦ 88Ã—128 |

ğŸ“Œ å°ç»“ï¼šçº¦ 12,288+ å­—èŠ‚ï¼ˆéšæ•°é‡å˜åŒ–ï¼‰

### 7) æ­¦å™¨çŠ¶æ€ `Weapon_Status`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| master_arm | æ€»æ­¦æ§ | int | 4 |
| selected_weapon_type | é€‰ä¸­æ­¦å™¨ç±»å‹ | int | 4 |
| weapon_count | å¼¹è¯æ•° | u16 | 2 |
| stores[32] | æ¶ä¸Šå¼¹è¯æ¸…å• | è§ä¸‹ | 512 |

`stores[i]`ï¼ˆ32 é¡¹ï¼‰ï¼š`id(u32,4)` + `status(int,4)` + `remaining_sec(double,8)` = 16 å­—èŠ‚/é¡¹ï¼Œæ€» 512 å­—èŠ‚

ğŸ“Œ å°ç»“ï¼šçº¦ 534 å­—èŠ‚

### 8) å¸§è¾“å…¥å°åŒ… `Inputs_Packet`

åŒ…å«å„æ¨¡å—ï¼š`ts` + `ins` + `radio` + `atmos` + `ac_state` + `sensor_targets` + `weapon`ã€‚

---

## ä¸‰ã€è¾“å‡ºå‚æ•°ï¼ˆOutputsï¼‰

### åæ ‡çº¦å®š

- å±å¹•åæ ‡ä¸ºç›¸å¯¹åæ ‡ `[0.0, 1.0]`ï¼Œ`(0,0)` å·¦ä¸Šï¼Œ`(1,1)` å³ä¸‹
- è§†åœºå‡è®¾ï¼šæ°´å¹³ Â±60Â°ï¼Œå‚ç›´ Â±30Â°ï¼›è¶…å‡ºè§†åœºçš„ç›®æ ‡ `visible=0`

### 1) åŠ¨æ€ç¬¦å· `Dynamic_Symbol`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| symbol_id | å›¾æ ‡ ID | u32 | 4 |
| pos.x | å±å¹• X | double | 8 |
| pos.y | å±å¹• Y | double | 8 |
| visible | æ˜¯å¦å¯è§ | int | 4 |
| flash_enable | é—ªçƒå¼€å…³ | int | 4 |
| flash_rate_hz | é—ªçƒé¢‘ç‡(Hz) | double | 8 |
| style | æ ·å¼(æ­£å¸¸/é—ªçƒ/æš—) | enum(int) | 4 |
| scale | ç¼©æ”¾ | double | 8 |

ğŸ“Œ å°ç»“ï¼šçº¦ 48 å­—èŠ‚/ç¬¦å·

### 2) æ•°å€¼ç¬¦å· `Numeric_Symbol`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| field_id | å­—æ®µ ID | u32 | 4 |
| valid | æœ‰æ•ˆæ€§ | int | 4 |
| value | æ•°å€¼ | double | 8 |
| units | å•ä½å­—ç¬¦ä¸² | char[8] | 8 |
| pos.x | å±å¹• X | double | 8 |
| pos.y | å±å¹• Y | double | 8 |
| decimal_places | å°æ•°ä½æ•° | int | 4 |

ğŸ“Œ å°ç»“ï¼šçº¦ 44 å­—èŠ‚/é¡¹

### 3) å­—ç¬¦ä¸²ç¬¦å· `String_Symbol`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| field_id | å­—æ®µ ID | u32 | 4 |
| valid | æœ‰æ•ˆæ€§ | int | 4 |
| text | æ–‡æœ¬å†…å®¹ | char[64] | 64 |
| pos.x | å±å¹• X | double | 8 |
| pos.y | å±å¹• Y | double | 8 |
| font_size | å­—å· | int | 4 |

ğŸ“Œ å°ç»“ï¼šçº¦ 92 å­—èŠ‚/é¡¹

### 4) å¸§è¾“å‡ºå°åŒ… `Outputs_Packet`

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | çº¦å­—èŠ‚ |
|---|---|---|---|
| ts | æ—¶é—´æˆ³ | Timestamp | 12 |
| page_number | ç”»é¢å· | u16 | 2 |
| dyn_count | åŠ¨æ€ç¬¦å·æ•°é‡ | u16 | 2 |
| dyn_symbols | åŠ¨æ€ç¬¦å·æ•°ç»„(æœ€å¤š 256) | `Dynamic_Symbol[256]` | çº¦ 48Ã—256 |
| num_count | æ•°å€¼ç¬¦å·æ•°é‡ | u16 | 2 |
| num_symbols | æ•°å€¼ç¬¦å·æ•°ç»„(æœ€å¤š 64) | `Numeric_Symbol[64]` | çº¦ 44Ã—64 |
| str_count | å­—ç¬¦ä¸²ç¬¦å·æ•°é‡ | u16 | 2 |
| str_symbols | å­—ç¬¦ä¸²ç¬¦å·æ•°ç»„(æœ€å¤š 64) | `String_Symbol[64]` | çº¦ 92Ã—64 |

---

## å››ã€æ˜ å°„ä¸é¡µé¢é€»è¾‘æ‘˜è¦

- é¡µé¢é€‰æ‹©ï¼šæ­¦å™¨æ€»æ§ä¸”æœ‰å¼¹ â†’ `page_number=3`ï¼›ç©ºä¸­ â†’ `page_number=1`ï¼›åœ°é¢ â†’ `page_number=0`
- æ•°å€¼ç¤ºä¾‹ï¼šé«˜åº¦(ç±³)ã€ç©ºé€Ÿ(èŠ‚)ã€èˆªå‘(åº¦)ï¼›INS æ— æ•ˆåˆ™é«˜åº¦å­—æ®µæ ‡è®°ä¸ºæ— æ•ˆ
- ç›®æ ‡æ˜ å°„ï¼šæ ¹æ®æ–¹ä½/ä¿¯ä»°çº¿æ€§æŠ•å½±åˆ°å±å¹•åæ ‡ï¼Œå¹¶åœ¨ `tentative` çŠ¶æ€ä¸‹å¯ç”¨é—ªçƒ

---

ä»¥ä¸Šè§„èŒƒä¸ `hud_sim.c` çš„ç»“æ„å®šä¹‰ä¿æŒä¸€è‡´ï¼Œå¯ç›´æ¥ç”¨äºæ¥å£è®¾è®¡ä¸è”è°ƒã€‚

